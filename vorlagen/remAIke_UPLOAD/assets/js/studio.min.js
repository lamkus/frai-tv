/*! For license information please see studio.min.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(t,n,o){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function c(n,o,r,i){var c=o&&o.prototype instanceof s?o:s,d=Object.create(c.prototype);return a(d,"_invoke",function(n,o,r){var a,i,c,s=0,d=r||[],u=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return a=t,i=0,c=e,m.n=n,l}};function f(n,o){for(i=n,c=o,t=0;!u&&s&&!r&&t<d.length;t++){var r,a=d[t],f=m.p,p=a[2];n>3?(r=p===o)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=f&&((r=n<2&&f<a[1])?(i=0,m.v=o,m.n=a[1]):f<p&&(r=n<3||a[0]>o||o>p)&&(a[4]=n,a[5]=o,m.n=p,i=0))}if(r||n>1)return l;throw u=!0,o}return function(r,d,p){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&f(d,p),i=d,c=p;(t=i<2?e:c)||!u;){a||(i?i<3?(i>1&&(m.n=-1),f(i,c)):m.n=c:m.v=c);try{if(s=2,a){if(i||(r="next"),t=a[r]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);a=e}else if((t=(u=m.n<0)?c:n.call(o,m))!==l)break}catch(t){a=e,i=1,c=t}finally{s=1}}return{value:t,done:u}}}(n,r,i),!0),d}var l={};function s(){}function d(){}function u(){}t=Object.getPrototypeOf;var m=[][o]?t(t([][o]())):(a(t={},o,function(){return this}),t),f=u.prototype=s.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=u,a(f,"constructor",u),a(u,"constructor",d),d.displayName="GeneratorFunction",a(u,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,o,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:p}})()}function a(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}a=function(e,t,n,o){function i(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},a(e,t,n,o)}function i(e,t,n,o,r,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(o,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function c(e){i(a,o,r,c,l,"next",e)}function l(e){i(a,o,r,c,l,"throw",e)}c(void 0)})}}var l="http://localhost:3001",s={en:{"nav.studio":"Studio","nav.features":"Features","nav.youtube":"YouTube","hero.badge":"Reference grade ‚Ä¢ Broadcast ready ‚Ä¢ Archive safe","hero.title":"FILM HERITAGE. REIMAGINED.","hero.subtitle":"AI-assisted restoration for archives, broadcasters and studios ‚Äî frame-by-frame, manual QC and master-quality deliverables.","hero.ctaStudio":"üé¨ Open comparison studio","hero.ctaB2B":"For institutions","hero.meta":"Available: 4K/8K ‚Ä¢ Format: broadcast ready ‚Ä¢ Contact: remAIke_IT","studio.badge":"‚ú® Interactive comparison","studio.title":"Experience the difference","studio.subtitle":"Click, drag, zoom ‚Äì explore every detail of our AI enhancement.","studio.selectLabel":"Select comparison:","features.badge":"üõ†Ô∏è Technology stack","features.title":"Enhancement pipeline","features.subtitle":"State-of-the-art AI models for video restoration.","controls.modesLabel":"Compare modes","controls.modeSideBySide":"Side by side","controls.modeSlider":"Slider","controls.modeClick":"Click","controls.modeZoom":"Zoom","controls.playLabel":"Play both streams","controls.sync":"Sync","controls.fullscreen":"Fullscreen"},de:{"nav.studio":"Studio","nav.features":"Funktionen","nav.youtube":"YouTube","hero.badge":"Referenzqualit√§t ‚Ä¢ Sendequalit√§t ‚Ä¢ Archivstandard","hero.title":"FILMERBE. NEU ERLEBT.","hero.subtitle":"KI-gest√ºtzte Restaurierung f√ºr Archive, Sender und Produktionsh√§user ‚Äî Frame-by-frame, manuelle QC und Master-Qualit√§t.","hero.ctaStudio":"üé¨ Studio √∂ffnen","hero.ctaB2B":"F√ºr Institutionen","hero.meta":"Verf√ºgbar: 4K/8K ‚Ä¢ Format: Broadcast-ready ‚Ä¢ Kontakt: remAIke_IT","studio.badge":"‚ú® Interaktiver Vergleich","studio.title":"Erleben Sie den Unterschied","studio.subtitle":"Klicken, ziehen, zoomen ‚Äì pr√ºfen Sie jedes Detail unserer KI-Optimierung.","studio.selectLabel":"Vergleich w√§hlen:","features.badge":"üõ†Ô∏è Technologie-Stack","features.title":"Enhancement-Pipeline","features.subtitle":"State-of-the-Art KI-Modelle f√ºr Videorestaurierung.","controls.modesLabel":"Vergleichsmodi","controls.modeSideBySide":"Nebeneinander","controls.modeSlider":"Slider","controls.modeClick":"Klick","controls.modeZoom":"Zoom","controls.playLabel":"Beide Streams abspielen","controls.sync":"Sync","controls.fullscreen":"Vollbild"},fr:{"nav.studio":"Studio","nav.features":"Fonctionnalit√©s","nav.youtube":"YouTube","hero.badge":"Qualit√© de r√©f√©rence ‚Ä¢ Diffusion ‚Ä¢ Archives","hero.title":"PATRIMOINE CIN√âMA. R√âINVENT√â.","hero.subtitle":"Restauration assist√©e par IA pour archives, diffuseurs et studios ‚Äî image par image, contr√¥le manuel et masters pr√™ts pour la diffusion.","hero.ctaStudio":"üé¨ Ouvrir le studio de comparaison","hero.ctaB2B":"Pour les institutions","hero.meta":"Disponible : 4K/8K ‚Ä¢ Format : pr√™t pour la diffusion ‚Ä¢ Contact : remAIke_IT","studio.badge":"‚ú® Comparaison interactive","studio.title":"Vivez la diff√©rence","studio.subtitle":"Cliquez, faites glisser, zoomez ‚Äì inspectez chaque d√©tail de notre am√©lioration IA.","studio.selectLabel":"S√©lectionner la comparaison :","features.badge":"üõ†Ô∏è Pile technologique","features.title":"Pipeline d‚Äôam√©lioration","features.subtitle":"Mod√®les d‚ÄôIA de pointe pour la restauration vid√©o.","controls.modesLabel":"Modes de comparaison","controls.modeSideBySide":"C√¥te √† c√¥te","controls.modeSlider":"Slider","controls.modeClick":"Clic","controls.modeZoom":"Zoom","controls.playLabel":"Lire les deux flux","controls.sync":"Sync","controls.fullscreen":"Plein √©cran"},es:{"nav.studio":"Estudio","nav.features":"Funciones","nav.youtube":"YouTube","hero.badge":"Calidad de referencia ‚Ä¢ Emisi√≥n ‚Ä¢ Archivo","hero.title":"PATRIMONIO F√çLMICO. REIMAGINADO.","hero.subtitle":"Restauraci√≥n asistida por IA para archivos, cadenas y estudios ‚Äî fotograma a fotograma, control manual y masters listos para emisi√≥n.","hero.ctaStudio":"üé¨ Abrir estudio de comparaci√≥n","hero.ctaB2B":"Para instituciones","hero.meta":"Disponible: 4K/8K ‚Ä¢ Formato: listo para emisi√≥n ‚Ä¢ Contacto: remAIke_IT","studio.badge":"‚ú® Comparaci√≥n interactiva","studio.title":"Experimenta la diferencia","studio.subtitle":"Haz clic, arrastra y haz zoom: explora cada detalle de nuestra mejora con IA.","studio.selectLabel":"Seleccionar comparaci√≥n:","features.badge":"üõ†Ô∏è Stack tecnol√≥gico","features.title":"Pipeline de mejora","features.subtitle":"Modelos de IA de √∫ltima generaci√≥n para restauraci√≥n de v√≠deo.","controls.modesLabel":"Modos de comparaci√≥n","controls.modeSideBySide":"Lado a lado","controls.modeSlider":"Slider","controls.modeClick":"Clic","controls.modeZoom":"Zoom","controls.playLabel":"Reproducir ambos v√≠deos","controls.sync":"Sync","controls.fullscreen":"Pantalla completa"},mx:{"nav.studio":"Estudio","nav.features":"Funciones","nav.youtube":"YouTube","hero.badge":"Calidad de referencia ‚Ä¢ Televisi√≥n ‚Ä¢ Archivo","hero.title":"LEGADO DEL CINE. REIMAGINADO.","hero.subtitle":"Restauraci√≥n asistida por IA para archivos, televisoras y estudios ‚Äî cuadro por cuadro, revisi√≥n manual y masters listos para pantalla grande.","hero.ctaStudio":"üé¨ Abrir estudio de comparaci√≥n","hero.ctaB2B":"Para instituciones","hero.meta":"Disponible: 4K/8K ‚Ä¢ Formato: listo para emisi√≥n ‚Ä¢ Contacto: remAIke_IT","studio.badge":"‚ú® Comparaci√≥n interactiva","studio.title":"Siente la diferencia","studio.subtitle":"Haz clic, arrastra y haz zoom: revisa cada cuadro de nuestra mejora con IA.","studio.selectLabel":"Seleccionar comparaci√≥n:","features.badge":"üõ†Ô∏è Stack tecnol√≥gico","features.title":"Pipeline de mejora","features.subtitle":"Modelos de IA de √∫ltima generaci√≥n para restauraci√≥n de video.","controls.modesLabel":"Modos de comparaci√≥n","controls.modeSideBySide":"Lado a lado","controls.modeSlider":"Slider","controls.modeClick":"Clic","controls.modeZoom":"Zoom","controls.playLabel":"Reproducir ambos videos","controls.sync":"Sync","controls.fullscreen":"Pantalla completa"}};function d(e){var t=s[e]||s.en;document.documentElement.lang="mx"===e?"es-MX":e,document.querySelectorAll("[data-i18n]").forEach(function(e){var n=e.getAttribute("data-i18n"),o=t[n];o&&("A"!==e.tagName&&"BUTTON"!==e.tagName&&"SPAN"!==e.tagName&&"DIV"!==e.tagName&&"H1"!==e.tagName&&"H2"!==e.tagName&&"P"!==e.tagName||(e.textContent=o))}),document.querySelectorAll(".lang-btn").forEach(function(t){t.classList.toggle("active",t.getAttribute("data-lang")===e)}),localStorage.setItem("remAIke_lang",e)}function u(){var e=document.querySelector(".typewriter");if(e){var t=e.textContent.trim();e.textContent="";var n=0,o=function(){n<=t.length&&(e.textContent=t.substring(0,n),n++,setTimeout(o,50))};o()}var a=document.getElementById("terminal-dynamic");if(a){var i=function(){var e=l[s];a.innerHTML='<span class="terminal-prompt">‚ñ∂</span> '.concat(e.name," ‚Üí ").concat(e.status,' <span class="status">‚úì</span>'),s=(s+1)%l.length,setTimeout(i,2500)},l=[{name:"Felix the Cat (1919)",status:"4K HDR"},{name:"Superman (1941)",status:"4K 60fps"},{name:"Betty Boop (1932)",status:"4K Color"},{name:"Popeye (1933)",status:"4K HDR"},{name:"Steamboat Willie (1928)",status:"4K"}],s=0;i()}var d=document.getElementById("hero-canvas");if(d&&d.getContext){var u=function(){d.width=d.clientWidth,d.height=d.clientHeight},m=function(){f.clearRect(0,0,d.width,d.height);var e=f.createLinearGradient(0,0,d.width,d.height);e.addColorStop(0,"rgba(0,240,255,0.03)"),e.addColorStop(1,"rgba(124,58,237,0.03)"),f.fillStyle=e,f.fillRect(0,0,d.width,d.height);for(var t=0,n=p;t<n.length;t++){var o=n[t];o.x+=o.vx,o.y+=o.vy,o.x<-50&&(o.x=d.width+50),o.y<-50&&(o.y=d.height+50),o.x>d.width+50&&(o.x=-50),o.y>d.height+50&&(o.y=-50),f.beginPath(),f.fillStyle="rgba(255,255,255,".concat(o.a,")"),f.arc(o.x,o.y,o.r,0,2*Math.PI),f.fill()}requestAnimationFrame(m)},f=d.getContext("2d");u(),window.addEventListener("resize",u);for(var p=[],h=0;h<24;h++)p.push({x:Math.random()*d.width,y:Math.random()*d.height,r:6+20*Math.random(),vx:.2*(Math.random()-.5),vy:.2*(Math.random()-.5),a:.08+.2*Math.random()});m()}var v=document.getElementById("matrix-rain");if(v&&v.getContext){var g=function(){v.width=window.innerWidth,v.height=window.innerHeight},y=v.getContext("2d");g(),window.addEventListener("resize",g);var b="01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥",E=14,S=Math.floor(v.width/E),I=Array(S).fill(1);setInterval(function(){y.fillStyle="rgba(3, 3, 8, 0.05)",y.fillRect(0,0,v.width,v.height),y.fillStyle="#00f0ff",y.font="".concat(E,"px 'JetBrains Mono', monospace");for(var e=0;e<I.length;e++){var t=b[Math.floor(Math.random()*b.length)],n=e*E,o=I[e]*E;y.fillStyle=Math.random()>.95?"#ff00aa":Math.random()>.9?"#7c3aed":"#00f0ff",y.fillText(t,n,o),o>v.height&&Math.random()>.975&&(I[e]=0),I[e]++}},45)}var L=["üìº","üíø","üéûÔ∏è","üìÄ","üé¨","üìπ"],k=0,B=0,w=0,x=0;document.addEventListener("mousemove",function(e){var t=Date.now(),n=e.clientX-w,o=e.clientY-x;if(B+=Math.sqrt(n*n+o*o),w=e.clientX,x=e.clientY,t-k>80&&B>40){k=t,B=0;var r=document.createElement("span");r.className="cursor-trail-icon",r.textContent=L[Math.floor(Math.random()*L.length)],r.style.left=e.clientX+"px",r.style.top=e.clientY+"px",document.body.appendChild(r),setTimeout(function(){return r.remove()},800)}});var A=document.getElementById("btn-b2b"),C=document.getElementById("b2b-modal"),T=document.getElementById("b2b-close"),M=document.getElementById("b2b-cancel"),P=document.getElementById("b2b-form");A&&C&&A.addEventListener("click",function(e){e.preventDefault(),C.classList.add("open"),C.setAttribute("aria-hidden","false")}),T&&T.addEventListener("click",function(){C.classList.remove("open"),C.setAttribute("aria-hidden","true")}),M&&M.addEventListener("click",function(){C.classList.remove("open"),C.setAttribute("aria-hidden","true")}),P&&P.addEventListener("submit",function(){var e=c(r().m(function e(t){var n,o,a,i,c,l,s,d,u,m,f,p;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.preventDefault(),n=document.getElementById("org").value.trim(),o=document.getElementById("email").value.trim(),a=document.getElementById("contact-name").value.trim(),i=document.getElementById("sector").value,c=document.getElementById("scope").value,l=document.getElementById("description").value.trim(),s=document.getElementById("gdpr").checked,n){e.n=1;break}return alert("Bitte geben Sie Ihre Organisation ein."),document.getElementById("org").focus(),e.a(2);case 1:if(o){e.n=2;break}return alert("Bitte geben Sie eine E-Mail-Adresse ein."),document.getElementById("email").focus(),e.a(2);case 2:if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){e.n=3;break}return alert("Bitte geben Sie eine g√ºltige E-Mail-Adresse ein."),document.getElementById("email").focus(),e.a(2);case 3:if(i&&""!==i){e.n=4;break}return alert("Bitte w√§hlen Sie eine Branche aus."),e.a(2);case 4:if(c&&""!==c){e.n=5;break}return alert("Bitte w√§hlen Sie den Projektumfang aus."),e.a(2);case 5:if(s){e.n=6;break}return alert("Bitte akzeptieren Sie unsere Datenschutzrichtlinie."),document.getElementById("gdpr").focus(),e.a(2);case 6:return d=P.querySelector('button[type="submit"]'),u=d.textContent,d.disabled=!0,d.textContent="Wird √ºbermittelt...",e.p=7,e.n=8,fetch("/api/offer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org:n,email:o,contact_name:a,sector:i,scope:c,description:l,gdpr:!0})});case 8:return m=e.v,e.n=9,m.json();case 9:(f=e.v).success?(alert("‚úì Vielen Dank! Ihre Anfrage (".concat(f.offerId,") wurde erfolgreich √ºbermittelt.\n\nWir senden Ihnen in K√ºrze ein detailliertes Angebot per E-Mail zu.")),P.reset(),C.classList.remove("open"),C.setAttribute("aria-hidden","true")):alert("Fehler bei der √úbermittlung: ".concat(f.error)),e.n=11;break;case 10:e.p=10,p=e.v,console.error("B2B offer error:",p),alert("Fehler: Anfrage konnte nicht √ºbermittelt werden. Bitte versuchen Sie es sp√§ter erneut oder kontaktieren Sie uns unter hello@remAIke.IT");case 11:return e.p=11,d.disabled=!1,d.textContent=u,e.f(11);case 12:return e.a(2)}},e,null,[[7,10,11,12]])}));return function(t){return e.apply(this,arguments)}}())}var m=[],f="uploads/korn/preview/original_preview.mp4",p="uploads/korn/preview/enhanced_preview.mp4",h=-1,v="slider",g=!1,y=!0,b=document.getElementById("video-wrapper"),E=document.getElementById("video-enhanced"),S=document.getElementById("video-original"),I=document.getElementById("slider-enhanced"),L=document.getElementById("slider-original"),k=document.getElementById("slider-handle"),B=document.getElementById("zoom-lens"),w=document.getElementById("zoom-video"),x=document.getElementById("zoom-label"),A=document.getElementById("mode-indicator"),C=document.getElementById("click-overlay"),T=document.getElementById("shortcuts-panel"),M=document.getElementById("comparison-dropdown"),P=document.getElementById("btn-rescan"),O=[];function z(e,t){if(t){if(t.endsWith(".m3u8"))if(Hls.isSupported()){var n=new Hls({capLevelToPlayerSize:!0,maxBufferLength:30,maxMaxBufferLength:60});n.loadSource(t),n.attachMedia(e),O.push(n)}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=t);else e.src=t;e.load()}}function F(){return j.apply(this,arguments)}function j(){return(j=c(r().m(function e(){var t,o,a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("".concat(l,"/api/comparisons"));case 1:return t=e.v,e.n=2,t.json();case 2:o=e.v,m=o.comparisons.map(function(e){var t=e.enhanced,o=e.original;return l&&""!==l.trim()?(t="".concat(l,"/hls/").concat(e.id,"/enhanced.m3u8"),o=e.original?"".concat(l,"/hls/").concat(e.id,"/original.m3u8"):null):(t=e.preview||e.enhanced||null,o=e.preview||e.original||null),n(n({},e),{},{enhanced:t,original:o})}),D(),N(),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Failed to fetch comparisons:",a),N();case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function D(){m.forEach(function(e){var t=m.indexOf(e),n=document.createElement("option");n.value=t,n.textContent="üé¨ ".concat(e.name),M.appendChild(n)}),console.log("üì∫ Showing ".concat(m.length+1," videos (1 default + ").concat(m.length," from server)"))}function N(){h=-1,M.value="default",O.forEach(function(e){return e.destroy()}),O=[];var e=""===l.trim(),t=e?f:"".concat(l,"/").concat(f),n=e?p:"".concat(l,"/").concat(p);console.log("Loading default comparison:",{originalSrc:t,enhancedSrc:n}),[E,I].forEach(function(e){return z(e,n)}),[S,L].forEach(function(e){return z(e,t)}),console.log("‚úÖ All videos ready - starting autoplay loop"),[E,S,I,L].forEach(function(e){e.loop=!0,e.muted=!0,e.play().catch(function(e){return console.warn("Autoplay blocked:",e)})}),g=!0,Y(),R(!0),console.log("‚úÖ Loaded: Korn ‚Äì Freak On a Leash (Licensed Preview)")}function R(e){var t=document.getElementById("license-notice");e?(t||((t=document.createElement("div")).id="license-notice",t.innerHTML='\n                    <div class="license-badge">\n                        <span class="license-icon">¬©</span>\n                        <span class="license-text">Licensed Preview ‚Ä¢ Segments: 1:00-1:18 ‚Üí 2:15-2:35</span>\n                    </div>\n                ',b.appendChild(t)),t.style.display="block"):t&&(t.style.display="none")}function K(e){h=e;var t=m[e];if(t){M.value=e,O.forEach(function(e){return e.destroy()}),O=[],console.log("Loading comparison:",t.name,{enhanced:t.enhanced,original:t.original}),t.enhanced?[E,I].forEach(function(e){return z(e,enhancedSrc)}):console.error("No enhanced video for:",t.name);var n=t.original||t.enhanced;n&&[S,L].forEach(function(e){return z(e,n)}),R(!!t.isPreview),console.log("‚úÖ Loaded: ".concat(t.name)),g&&H()}else console.error("Comparison not found:",e)}function q(e){v=e,b.className="video-wrapper "+e+"-mode",document.querySelectorAll(".control-btn[data-mode]").forEach(function(t){t.classList.toggle("active",t.dataset.mode===e)});A.textContent={sidebyside:"Side by Side",slider:"Slider",click:"Click Compare",zoom:"Zoom Lens"}[e]}function H(){Z(),[E,S,I,L].forEach(function(e){e&&e.paused&&e.play().catch(function(e){return console.warn("Play failed:",e)})}),g=!0,document.getElementById("btn-play").innerHTML="<span>‚è∏</span>",Y()}function _(){[E,S,I,L].forEach(function(e){e&&!e.paused&&e.pause()}),g=!1,document.getElementById("btn-play").innerHTML="<span>‚ñ∂</span>",V=!1,console.log("‚èπÔ∏è Video sync loop stopped")}M.addEventListener("change",function(e){"default"===e.target.value?N():K(parseInt(e.target.value))}),P.addEventListener("click",c(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return P.classList.add("loading"),e.p=1,e.n=2,fetch("".concat(l,"/api/scan"),{method:"POST"});case 2:for(;M.options.length>1;)M.remove(1);return e.n=3,F();case 3:e.n=5;break;case 4:e.p=4,t=e.v,console.error("Rescan failed:",t);case 5:return e.p=5,P.classList.remove("loading"),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])})));var V=!1,G=.042,W=100;function Z(){if(E&&S){var e=E.currentTime;[S,I,L].forEach(function(t,n){if(t&&!(t.readyState<2)){var o=Math.abs(t.currentTime-e);if(o>G){console.log("üîÑ Syncing video ".concat(n,": drift=").concat(o.toFixed(3),"s"));try{t.currentTime=e}catch(e){console.warn("‚ö†Ô∏è Sync failed for video ".concat(n,":"),e)}}}})}}function Y(){V||(V=!0,requestAnimationFrame(function e(){V&&(Z(),setTimeout(function(){return requestAnimationFrame(e)},W))}),console.log("‚úÖ Video sync loop started"))}E.addEventListener("timeupdate",Z),E.addEventListener("seeked",Z),E.addEventListener("play",function(){[S,I,L].forEach(function(e){e&&e.paused&&e.play().catch(function(){})}),Y()}),E.addEventListener("pause",function(){[S,I,L].forEach(function(e){e&&!e.paused&&e.pause()})}),[S,I,L].forEach(function(e,t){e.addEventListener("waiting",function(){console.warn("‚è≥ Video ".concat(t," stalled, forcing resync")),Z()}),e.addEventListener("playing",function(){Z()})}),[E,S,I,L].forEach(function(e,t){var n=["videoEnhanced","videoOriginal","sliderEnhanced","sliderOriginal"];e.addEventListener("error",function(o){var r,a;console.error("‚ùå Video error on ".concat(n[t],":"),{src:e.src,error:e.error,code:null===(r=e.error)||void 0===r?void 0:r.code,message:null===(a=e.error)||void 0===a?void 0:a.message})}),e.addEventListener("loadedmetadata",function(){console.log("‚úÖ Video loaded ".concat(n[t],":"),{src:e.src,duration:e.duration,width:e.videoWidth,height:e.videoHeight})})});var X=!1;k.addEventListener("mousedown",function(){return X=!0}),document.addEventListener("mouseup",function(){return X=!1}),document.addEventListener("mousemove",function(e){if(X&&"slider"===v){var t=b.getBoundingClientRect(),n=Math.max(0,Math.min(1,(e.clientX-t.left)/t.width));k.style.left=100*n+"%",I.style.clipPath="inset(0 ".concat(100*(1-n),"% 0 0)")}});var U=4,Q=null;b.addEventListener("mousemove",function(e){if("zoom"===v){var t=b.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top;B.style.left=n+"px",B.style.top=o+"px";var r=n<t.width/2;x.textContent=r?"Enhanced":"Original";var a=r?E:S;Q!==a&&(Q=a,"zoom"===v&&Q&&(w.src!==Q.src&&(w.src=Q.src,w.currentTime=Q.currentTime,w.play().catch(function(){})),w.currentTime=Q.currentTime));var i=-n/t.width*(U-1)*100,c=-o/t.height*(U-1)*100;w.style.objectPosition="".concat(50+i,"% ").concat(50+c,"%")}});var J=!1;function $(){var e=document.getElementById("panel-enhanced"),t=document.getElementById("panel-original");"click"===v?(e.style.opacity=y?"1":"0",t.style.opacity=y?"0":"1"):(e.style.opacity="1",t.style.opacity="1")}b.addEventListener("click",function(e){if("zoom"===v)if(J){var t;H(),J=!1,null===(t=document.getElementById("zoom-pause-indicator"))||void 0===t||t.remove()}else{_(),J=!0;var n=document.createElement("div");n.id="zoom-pause-indicator",n.innerHTML="‚è∏ PAUSED - Click to resume",n.style.cssText="position:absolute;bottom:80px;left:50%;transform:translateX(-50%);padding:10px 20px;background:rgba(0,0,0,0.85);border:1px solid var(--brand-primary);border-radius:8px;color:var(--brand-primary);font-size:0.9rem;z-index:100;",b.appendChild(n)}else{if(e.target.closest(".slider-handle")||e.target.closest("#slider-handle"))return;if("click"===v)return;g?_():H()}}),b.addEventListener("contextmenu",function(e){if("zoom"===v){e.preventDefault(),U=4===U?8:8===U?2:4,w.style.width=100*U+"%",w.style.height=100*U+"%";var t=document.createElement("div");t.textContent="".concat(U,"x"),t.style.position="absolute",t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.color="#fff",t.style.fontWeight="bold",t.style.pointerEvents="none",t.style.zIndex="200",t.style.textShadow="0 2px 4px rgba(0,0,0,0.8)",t.style.animation="trailFade 0.5s ease-out forwards",document.body.appendChild(t),setTimeout(function(){return t.remove()},500)}}),C.addEventListener("mousedown",function(){y=!1,$()}),C.addEventListener("mouseup",function(){y=!0,$()}),C.addEventListener("mouseleave",function(){y=!0,$()}),C.addEventListener("touchstart",function(e){e.preventDefault(),y=!1,$()}),C.addEventListener("touchend",function(){y=!0,$()});var ee=!1,te=document.getElementById("video-grid"),ne=q;q=function(e){ee&&(te.style.transition="transform 0.2s ease-in",te.style.transform="scale(1)",ee=!1),ne(e)},document.querySelectorAll(".control-btn[data-mode]").forEach(function(e){e.addEventListener("click",function(){return q(e.dataset.mode)})}),document.getElementById("btn-play").addEventListener("click",function(){return g?_():H()}),document.getElementById("btn-sync").addEventListener("click",Z),document.getElementById("btn-fullscreen").addEventListener("click",function(){b.requestFullscreen&&b.requestFullscreen()});var oe=1/24;function re(){_();var e=Math.max(0,E.currentTime-oe);[E,S,I,L].forEach(function(t){t&&(t.currentTime=e)}),de()}function ae(){_();var e=Math.min(E.duration||0,E.currentTime+oe);[E,S,I,L].forEach(function(t){t&&(t.currentTime=e)}),de()}var ie=document.getElementById("timeline-scrubber"),ce=document.getElementById("time-current"),le=document.getElementById("time-duration");function se(e){if(!e||isNaN(e))return"0:00";var t=Math.floor(e/60),n=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)}function de(){if(E){var e=E.currentTime||0,t=E.duration||0;ie.value=t>0?e/t*100:0,ce.textContent=se(e),le.textContent=se(t)}}function ue(e){var t=Math.max(0,Math.min(E.duration||0,E.currentTime+e));[E,S,I,L].forEach(function(e){e&&(e.currentTime=t)}),de()}ie.addEventListener("input",function(e){var t=E.duration||0,n=parseFloat(e.target.value)/100*t;[E,S,I,L].forEach(function(e){e&&(e.currentTime=n)}),de()}),E.addEventListener("timeupdate",de),E.addEventListener("loadedmetadata",function(){le.textContent=se(E.duration)}),document.getElementById("btn-frame-back").addEventListener("click",re),document.getElementById("btn-frame-forward").addEventListener("click",ae),document.addEventListener("keydown",function(e){var t;if("INPUT"!==e.target.tagName)switch(e.key){case" ":e.preventDefault(),g?_():H();break;case"1":q("sidebyside");break;case"2":q("slider");break;case"3":q("click");break;case"4":q("zoom");break;case"f":case"F":null===(t=b.requestFullscreen)||void 0===t||t.call(b);break;case"s":case"S":Z();break;case"?":T.classList.toggle("visible");break;case"ArrowRight":e.shiftKey&&K(Math.min(h+1,m.length-1));break;case"ArrowLeft":e.shiftKey&&K(Math.max(h-1,0));break;case",":case"<":re();break;case".":case">":ae();break;case"ArrowUp":e.preventDefault(),ue(5);break;case"ArrowDown":e.preventDefault(),ue(-5)}}),document.addEventListener("DOMContentLoaded",c(r().m(function e(){var t,n,o;return r().w(function(e){for(;;)switch(e.n){case 0:return q("sidebyside"),document.querySelectorAll(".control-btn[data-mode]").forEach(function(e){e.addEventListener("click",function(){return q(e.dataset.mode)})}),document.getElementById("btn-play").addEventListener("click",function(){g?_():H()}),document.getElementById("btn-sync").addEventListener("click",Z),document.getElementById("btn-fullscreen").addEventListener("click",toggleFullscreen),t=localStorage.getItem("remAIke_lang"),n=(navigator.language||"en").toLowerCase(),o=t||(n.startsWith("de")?"de":n.startsWith("fr")?"fr":n.startsWith("es")?"es":"en"),s[o]||(o="en"),d(o),document.querySelectorAll(".lang-btn").forEach(function(e){e.addEventListener("click",function(){return d(e.getAttribute("data-lang"))})}),u(),e.n=1,F();case 1:return e.a(2)}},e)})))})();